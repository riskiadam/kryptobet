!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue"),require("@livechat/widget-core")):"function"==typeof define&&define.amd?define(["exports","vue","@livechat/widget-core"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).LiveChatWidgetVue={},e.Vue,e.LiveChatWidgetCore)}(this,(function(e,n,t){"use strict";function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(){var e=n.ref(null),i=null,u=null,o=function(n){e.value=n.customerData},r=function(){e.value=t.getData("customer")};return n.onMounted((function(){i=t.lcOnInit((function(){t.assignEventHandlers("once",{onReady:o}),t.assignEventHandlers("on",{onCustomerStatusChanged:r})})),u=t.lcOnDestroy((function(){e.value=null}))})),n.onUnmounted((function(){var e,n;t.assignEventHandlers("off",{onReady:o,onCustomerStatusChanged:r}),null===(e=i)||void 0===e||e(),null===(n=u)||void 0===n||n()})),e}var a=n.defineComponent({props:{license:{type:Object,required:!0},group:{type:Object,required:!1,default:void 0},visibility:{type:Object,required:!1,default:void 0},customerName:{type:Object,required:!1,default:void 0},customerEmail:{type:Object,required:!1,default:void 0},sessionVariables:{type:Object,required:!1,default:void 0},chatBetweenGroups:{type:Object,required:!1,default:void 0}},data:function(){return{widget:null}},watch:{license:"reinitialize",group:"reinitialize",chatBetweenGroups:"reinitialize",visibility:function(e){var n;null===(n=this.widget)||void 0===n||n.updateVisibility(e)},customerName:function(e){var n;null===(n=this.widget)||void 0===n||n.updateCustomerData({name:e})},customerEmail:function(e){var n;null===(n=this.widget)||void 0===n||n.updateCustomerData({email:e})},sessionVariables:function(e){var n;null===(n=this.widget)||void 0===n||n.updateSessionVariables(e)}},mounted:function(){this.setupWidget()},unmounted:function(){var e;null===(e=this.widget)||void 0===e||e.destroy()},methods:{setupWidget:function(){var e=this.$emit;this.widget=t.createWidget({group:this.group,license:this.license,visibility:this.visibility,customerName:this.customerName,customerEmail:this.customerEmail,sessionVariables:this.sessionVariables,chatBetweenGroups:this.chatBetweenGroups,onReady:function(n){return e("ready",n)},onNewEvent:function(n){return e("new-event",n)},onFormSubmitted:function(n){return e("form-submitted",n)},onRatingSubmitted:function(n){return e("rating-submitted",n)},onGreetingHidden:function(n){return e("greeting-hidden",n)},onGreetingDisplayed:function(n){return e("greeting-displayed",n)},onVisibilityChanged:function(n){return e("visibility-changed",n)},onCustomerStatusChanged:function(n){return e("customer-status-changed",n)},onRichMessageButtonClicked:function(n){return e("rich-message-button-clicked",n)},onAvailabilityChanged:function(n){return e("availability-changed",n)}}),window.__lc.integration_name="@livechat/widget-vue",this.widget.init()},reinitialize:function(){var e;null===(e=this.widget)||void 0===e||e.destroy(),this.setupWidget()}}});e.LiveChatWidget=a,e.useWidgetChatData=function(){var e=n.ref(null),i=r();return n.watch((function(){var e;return null===(e=i.value)||void 0===e?void 0:e.status}),(function(n){e.value="chatting"===n?t.getData("chat"):null})),e},e.useWidgetCustomerData=r,e.useWidgetGreeting=function(){var e=n.ref(null),i=null,u=null,o=function(n){e.value=n},r=function(){e.value=null};return n.onMounted((function(){i=t.lcOnInit((function(){t.assignEventHandlers("on",{onGreetingDisplayed:o,onGreetingHidden:r})})),u=t.lcOnDestroy((function(){e.value=null}))})),n.onUnmounted((function(){var e,n;t.assignEventHandlers("off",{onGreetingDisplayed:o,onGreetingHidden:r}),null===(e=i)||void 0===e||e(),null===(n=u)||void 0===n||n()})),e},e.useWidgetIsReady=function(){var e=n.ref(!1),i=null,u=null,o=function(){e.value=!0};return n.onMounted((function(){i=t.lcOnInit((function(){t.assignEventHandlers("once",{onReady:o})})),u=t.lcOnDestroy((function(){e.value=!1}))})),n.onUnmounted((function(){var e,n;t.assignEventHandlers("off",{onReady:o}),null===(e=i)||void 0===e||e(),null===(n=u)||void 0===n||n()})),e},e.useWidgetState=function(){var e=n.ref(null),i=null,o=null,r=function(n){var t=n.state;e.value=t},a=function(n){var t=n.visibility;e.value=e.value?u(u({},e.value),{},{visibility:t}):e.value},l=function(n){var t=n.availability;e.value=e.value?u(u({},e.value),{},{availability:t}):e.value};return n.onMounted((function(){i=t.lcOnInit((function(){t.assignEventHandlers("once",{onReady:r}),t.assignEventHandlers("on",{onVisibilityChanged:a,onAvailabilityChanged:l})})),o=t.lcOnDestroy((function(){e.value=null}))})),n.onUnmounted((function(){var e,n;t.assignEventHandlers("off",{onReady:r,onVisibilityChanged:a,onAvailabilityChanged:l}),null===(e=i)||void 0===e||e(),null===(n=o)||void 0===n||n()})),e},Object.defineProperty(e,"__esModule",{value:!0})}));
