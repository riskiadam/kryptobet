{"remainingRequest":"C:\\Users\\kikis\\Documents\\kryptobet\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\kikis\\Documents\\kryptobet\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\kikis\\Documents\\kryptobet\\src\\services\\api.service.js","dependencies":[{"path":"C:\\Users\\kikis\\Documents\\kryptobet\\src\\services\\api.service.js","mtime":1642470647542},{"path":"C:\\Users\\kikis\\Documents\\kryptobet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644485493295},{"path":"C:\\Users\\kikis\\Documents\\kryptobet\\node_modules\\babel-loader\\lib\\index.js","mtime":1644485496476},{"path":"C:\\Users\\kikis\\Documents\\kryptobet\\node_modules\\eslint-loader\\index.js","mtime":1644485494680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFZ1ZUF4aW9zIGZyb20gInZ1ZS1heGlvcyI7CmltcG9ydCBKd3RTZXJ2aWNlIGZyb20gIi4vand0LnNlcnZpY2UiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwppbXBvcnQgeyBMT0dPVVQgfSBmcm9tICJAL3N0b3JlL2NvbnN0YW50cy9hY3Rpb25zLnR5cGUiOwp2YXIgbG9naW5Db25maWcgPSB7CiAgaGVhZGVyczogewogICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgZXJyb3JIYW5kbGVyOiBmdW5jdGlvbiBlcnJvckhhbmRsZXIoZXJyb3IpIHsKICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHsKICAgICAgVnVlLm5vdGlmeSh7CiAgICAgICAgZ3JvdXA6ICdFcnJvck1lc3NhZ2UnLAogICAgICAgIHRpdGxlOiAnTmV0d29yayBFcnJvcicsCiAgICAgICAgdGV4dDogJ1BsZWFzZSBjaGVjayB5b3VyIGNvbm5lY3Rpb24hJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSwKICAgICAgICBtYXg6IDEsCiAgICAgICAgaWdub3JlRHVwbGljYXRlczogdHJ1ZQogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoZXJyb3IucmVzcG9uc2UuY29uZmlnLnVybCA9PT0gInRva2VuIikgewogICAgICAvLyBMT0dJTiBGQUlMRUQKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JfZGVzY3JpcHRpb24pOwogICAgfSBlbHNlIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSB8fCBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgICAvLyBBVVRIIEVSUk9SCiAgICAgIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICBzdG9yZS5kaXNwYXRjaChMT0dPVVQpOwogICAgfSBlbHNlIHsKICAgICAgLy8gT1RIRVIgRVJST1IKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlKTsKICAgIH0KICB9LAogIHN1Y2Nlc3NIYW5kbGVyOiBmdW5jdGlvbiBzdWNjZXNzSGFuZGxlcihyZXNwb25zZSkgewogICAgLy8gTE9HSU4gUkVRdUVTVAogICAgaWYgKCFyZXNwb25zZS5kYXRhLnN0YXR1cykgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsgLy8gT1RIRVIgUkVRVUVTVAoKICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gIlN1Y2Nlc3MiKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlLmRhdGEucmVzdWx0KTtlbHNlIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogIH0sCiAgaW5pdDogZnVuY3Rpb24gaW5pdChhcGlVcmwpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpOwogICAgVnVlLmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSBhcGlVcmw7CiAgICBpZiAoSnd0U2VydmljZS5nZXRUb2tlbigpKSB0aGlzLnNldEhlYWRlcigpOwogICAgVnVlLmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiBfdGhpcy5zdWNjZXNzSGFuZGxlcihyZXNwb25zZSk7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmV0dXJuIF90aGlzLmVycm9ySGFuZGxlcihlcnJvcik7CiAgICB9KTsKICB9LAogIHNldEhlYWRlcjogZnVuY3Rpb24gc2V0SGVhZGVyKCkgewogICAgdmFyIHRva2VuT2JqZWN0ID0gSnd0U2VydmljZS5nZXRUb2tlbigpOwoKICAgIGlmICghdG9rZW5PYmplY3QpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goTE9HT1VUKTsKICAgIH0gZWxzZSB7CiAgICAgIFZ1ZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gImJlYXJlciAiICsgdG9rZW5PYmplY3QuYWNjZXNzX3Rva2VuOwogICAgfQogIH0sCiAgcmVtb3ZlSGVhZGVyOiBmdW5jdGlvbiByZW1vdmVIZWFkZXIoKSB7CiAgICBkZWxldGUgVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl07CiAgfSwKICBnZXQ6IGZ1bmN0aW9uIGdldChyZXNvdXJjZSwgcXVlcnkpIHsKICAgIGlmIChxdWVyeSkgcmVzb3VyY2UgKz0gdGhpcy5idWlsZFF1ZXJ5KHF1ZXJ5KTsKICAgIHJldHVybiBWdWUuYXhpb3MuZ2V0KHJlc291cmNlKTsKICB9LAogIHBvc3Q6IGZ1bmN0aW9uIHBvc3QocmVzb3VyY2UsIHBhcmFtcywgcXVlcnkpIHsKICAgIGlmIChxdWVyeSkgcmVzb3VyY2UgKz0gdGhpcy5idWlsZFF1ZXJ5KHF1ZXJ5KTsKICAgIHJldHVybiBWdWUuYXhpb3MucG9zdChyZXNvdXJjZSwgcGFyYW1zKTsKICB9LAogIHB1dDogZnVuY3Rpb24gcHV0KHJlc291cmNlLCBwYXJhbXMsIHF1ZXJ5KSB7CiAgICBpZiAocXVlcnkpIHJlc291cmNlICs9IHRoaXMuYnVpbGRRdWVyeShxdWVyeSk7CiAgICByZXR1cm4gVnVlLmF4aW9zLnB1dChyZXNvdXJjZSwgcGFyYW1zKTsKICB9LAogIGRlbGV0ZTogZnVuY3Rpb24gX2RlbGV0ZShyZXNvdXJjZSwgcXVlcnkpIHsKICAgIGlmIChxdWVyeSkgcmVzb3VyY2UgKz0gdGhpcy5idWlsZFF1ZXJ5KHF1ZXJ5KTsKICAgIHJldHVybiBWdWUuYXhpb3MuZGVsZXRlKHJlc291cmNlKTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHsKICAgIHZhciBwYXlsb2FkID0gInVzZXJuYW1lPSIgKyB1c2VybmFtZSArICImcGFzc3dvcmQ9IiArIHBhc3N3b3JkICsgIiZncmFudF90eXBlPXBhc3N3b3JkIjsKICAgIHJldHVybiBWdWUuYXhpb3MucG9zdCgib2F1dGgvdG9rZW4iLCBwYXlsb2FkLCBsb2dpbkNvbmZpZyk7CiAgfSwKICBidWlsZFF1ZXJ5OiBmdW5jdGlvbiBidWlsZFF1ZXJ5KHFPYmplY3QpIHsKICAgIHZhciByZXRWYWwgPSAiIjsKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocU9iamVjdCk7CiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKHgsIGkpIHsKICAgICAgaWYgKGkgPT09IDApIHJldFZhbCArPSAiPyIuY29uY2F0KHgsICI9IikuY29uY2F0KHFPYmplY3RbeF0pO2Vsc2UgcmV0VmFsICs9ICImIi5jb25jYXQoeCwgIj0iKS5jb25jYXQocU9iamVjdFt4XSk7CiAgICB9KTsKICAgIHJldHVybiByZXRWYWw7CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/kikis/Documents/kryptobet/src/services/api.service.js"],"names":["Vue","axios","VueAxios","JwtService","store","LOGOUT","loginConfig","headers","errorHandler","error","response","notify","group","title","text","type","closeOnClick","max","ignoreDuplicates","config","url","Promise","reject","data","error_description","status","dispatch","successHandler","resolve","result","message","init","apiUrl","use","defaults","baseURL","getToken","setHeader","interceptors","tokenObject","$store","common","access_token","removeHeader","get","resource","query","buildQuery","post","params","put","delete","login","username","password","payload","qObject","retVal","keys","Object","forEach","x","i"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport axios from \"axios\";\r\nimport VueAxios from \"vue-axios\";\r\nimport JwtService from \"./jwt.service\";\r\nimport store from \"../store\";\r\nimport { LOGOUT } from \"@/store/constants/actions.type\";\r\n\r\nconst loginConfig = {\r\n  headers: {\r\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n  }\r\n};\r\n\r\nexport default {\r\n  errorHandler(error) {\r\n    if (!error.response) {\r\n      Vue.notify({\r\n        group: 'ErrorMessage',\r\n        title: 'Network Error',\r\n        text: 'Please check your connection!',\r\n        type : 'error',\r\n        closeOnClick : true,\r\n        max : 1,\r\n        ignoreDuplicates : true\r\n      });\r\n    } else if (error.response.config.url === \"token\") {\r\n      // LOGIN FAILED\r\n      return Promise.reject(error.response.data.error_description);\r\n    } else if (error.response.status === 401 || error.response.status === 403) {\r\n      // AUTH ERROR\r\n      Promise.reject(error.response.data.error);\r\n      store.dispatch(LOGOUT);\r\n    } else {\r\n      // OTHER ERROR\r\n      return Promise.reject(error.response);\r\n    }\r\n  },\r\n  \r\n  successHandler(response) {\r\n    // LOGIN REQuEST\r\n    if (!response.data.status) return Promise.resolve(response.data);\r\n    // OTHER REQUEST\r\n    if (response.data.status === \"Success\")\r\n      return Promise.resolve(response.data.result);\r\n    else return Promise.reject(response.data.message);\r\n  },\r\n\r\n  init(apiUrl) {\r\n    Vue.use(VueAxios, axios);\r\n    Vue.axios.defaults.baseURL = apiUrl;\r\n    if (JwtService.getToken()) this.setHeader();\r\n    Vue.axios.interceptors.response.use(\r\n      (response) => this.successHandler(response),\r\n      (error) => this.errorHandler(error)\r\n    );\r\n  },\r\n\r\n  setHeader() {\r\n    let tokenObject = JwtService.getToken();\r\n    if (!tokenObject) {\r\n      this.$store.dispatch(LOGOUT);\r\n    } else {\r\n      Vue.axios.defaults.headers.common[\"Authorization\"] =\r\n        \"bearer \" + tokenObject.access_token;\r\n    }\r\n  },\r\n\r\n  removeHeader() {\r\n    delete Vue.axios.defaults.headers.common[\"Authorization\"];\r\n  },\r\n\r\n  get(resource, query) {\r\n    if (query) resource += this.buildQuery(query);\r\n    return Vue.axios.get(resource);\r\n  },\r\n\r\n  post(resource, params, query) {\r\n    if (query) resource += this.buildQuery(query);\r\n    return Vue.axios.post(resource, params);\r\n  },\r\n\r\n  put(resource, params, query) {\r\n    if (query) resource += this.buildQuery(query);\r\n    return Vue.axios.put(resource, params);\r\n  },\r\n\r\n  delete(resource, query) {\r\n    if (query) resource += this.buildQuery(query);\r\n    return Vue.axios.delete(resource);\r\n  },\r\n\r\n  login(username, password) {\r\n    var payload =\r\n      \"username=\" + username + \"&password=\" + password + \"&grant_type=password\";\r\n    return Vue.axios.post(\"oauth/token\", payload, loginConfig);\r\n  },\r\n\r\n  buildQuery(qObject) {\r\n    let retVal = \"\";\r\n    let keys = Object.keys(qObject);\r\n    keys.forEach((x, i) => {\r\n      if (i === 0) retVal += `?${x}=${qObject[x]}`;\r\n      else retVal += `&${x}=${qObject[x]}`;\r\n    });\r\n    return retVal;\r\n  }\r\n};\r\n"]}]}